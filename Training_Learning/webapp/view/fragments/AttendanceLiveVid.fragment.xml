<core:FragmentDefinition xmlns:html="http://www.w3.org/1999/xhtml" xmlns:u="sap.ui.unified" xmlns:smartForm="sap.ui.comp.smartform" xmlns:smartField="sap.ui.comp.smartfield" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns="sap.m" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core">
    <VBox width="100%">
            

        <Table id="idTblAttendanceLiveVid" width="auto" items="{ path: '/PainterTrainingSet', parameters : { expand : 'PainterDetails/PrimaryDealerDetails' }, sorter: { path: 'CreatedAt', descending: false } }" noDataText="{i18n>tableNoData}" growingScrollToLoad="false" busyIndicatorDelay="{oModelView>/tableBusyDelay}" growing="true" growingThreshold="15">
            <headerToolbar>
              <Toolbar>
                    <ToolbarSpacer/>
                         <u:FileUploader visible="{= ${oModelView>/TrainingDetails/Status} === 1 }" icon="sap-icon://upload" buttonText="{i18n>UploadAttendence}" class="sapUiTinyMarginEnd" id="idAttendanceLiveFileUploader" fileType="csv" buttonOnly="true" change="onFileUploadChange" sameFilenameAllowed="false" placeholder="Choose a CSV file" style="Emphasized"></u:FileUploader>
                              <Button text="{i18n>btnDownloadCSV}" icon="sap-icon://download" press="onExportAttendenceLive" type="Emphasized"/> 
                       
                        <SearchField width="20%" showSearchButton="true" search="onTablesSearch" value="{oModelView>/Search/AttendanceLive}"></SearchField>
                </Toolbar>
            </headerToolbar>

            <columns>
                <Column>
                    <Text text="{i18n>colPainterName}"/>
                </Column>
                <Column>
                    <Text text="{i18n>colMembershipId}"/>
                </Column>
                <Column>
                    <Text text="{i18n>colMobileNumber}"/>
                </Column>
                <Column>
                    <Text text="{i18n>colZone}"/>
                </Column>
                <Column>
                    <Text text="{i18n>colDivision}"/>
                </Column>
                <Column>
                    <Text text="{i18n>colDepot}"/>
                </Column>
                <Column>
                    <Text text="{i18n>colPrDealer}"/>
                </Column>
                <Column>
                    <Text text="{i18n>colAttendanceDate}"/>
                </Column>
                <Column>
                    <Text text="{i18n>colEarnedPoint}"/>
                </Column>
            </columns>

            <items>
                <ColumnListItem press="onListItemPress">
                    <cells>
                        <Text text="{PainterDetails/Name}"/>
                        <Text text="{PainterDetails/MembershipCard}"/>
                        <Text text="{PainterDetails/Mobile}"/>
                        <Text text="{PainterDetails/ZoneId}"/>
                        <Text text="{PainterDetails/DivisionId}"/>
                        <Text text="{PainterDetails/DepotId}"/>
                        <Text text="{PainterDetails/PrimaryDealerDetails/DealerName}"/>
                        <Text text="{path:'AttendedAt',type:'sap.ui.model.type.Date',formatOptions:{pattern:'dd/MM/YYYY'}}"/>
                        <Text text="{EarnedPoints}"/>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>

    </VBox>
</core:FragmentDefinition>
