<mvc:View controllerName="com.knpl.pragati.Manage_Notifications.controller.Worklist" xmlns:core="sap.ui.core" xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc" xmlns:f="sap.f" xmlns:l="sap.ui.layout" xmlns:fb="sap.ui.comp.filterbar">
	<f:DynamicPage id="page">
		<f:title>
			<f:DynamicPageTitle>
				<f:heading>
					<Title text="{i18n>worklistTitle}"/>
				</f:heading>
                
			</f:DynamicPageTitle>
		</f:title>
		<f:header>
			<f:DynamicPageHeader pinnable="true">
				<f:content>
					<!-- <l:VerticalLayout>
						<SearchField id="searchField" tooltip="{i18n>worklistSearchTooltip}" search=".onSearch">
							<layoutData>
								<OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/>
							</layoutData>
						</SearchField>
					</l:VerticalLayout> -->
                    <fb:FilterBar id="filterbar" reset="_ResetFilterBar" search="onFilter" useToolbar="false" showGoOnFB="true" showRestoreOnFB="true"> 
                       
                         
                        <fb:filterGroupItems>
                         
                         
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="Title" label="{i18n>Title}" visibleInFilterBar="true" class="searchFieldLabelHidden">
                                <fb:control>
                                     <Input  id="idTitle" name="Title" placeholder="{i18n>Enter} {i18n>Title}" value="{oModelControl>/filterBar/Title}"></Input>
                                </fb:control>
                            </fb:FilterGroupItem>
                            
                            
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="StartDate" label="{i18n>StartDate}" visibleInFilterBar="true" class="searchFieldLabelHidden">
                                <fb:control>
                                    <DatePicker placeholder="DD/MM/yyyy" id="idDpickerFilter" value="{path:'oModelControl>/filterBar/StartDate', type:'sap.ui.model.type.Date', formatOptions: {pattern:'dd/MM/yyyy', UTC:false } }" displayFormat="dd/MM/yyyy"></DatePicker>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="EndDate" label="{i18n>EndDate}" visibleInFilterBar="true" class="searchFieldLabelHidden">
                                <fb:control>
                                    <DatePicker placeholder="DD/MM/yyyy"  value="{path:'oModelControl>/filterBar/EndDate', type:'sap.ui.model.type.Date', formatOptions: {pattern:'dd/MM/yyyy', UTC:false } }" displayFormat="dd/MM/yyyy"></DatePicker>
                                </fb:control>
                            </fb:FilterGroupItem>


                             
                        </fb:filterGroupItems>

                    </fb:FilterBar>

				</f:content>
			</f:DynamicPageHeader>
		</f:header>
		<f:content>
			<IconTabBar id="idIconTabBar3" expanded="{device>/isNoPhone}" class="sapUiResponsiveContentPadding notification-tab">
				<items>
					<IconTabFilter text="{worklistView>/draft}">
						<Table id="table" width="auto"
							items="{ path: '/NotificationSet', parameters : { expand : 'Group, Receivers, Redirection' }, filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false }, { path : 'IsSystemGenerated' , operator : 'EQ' , value1 : false }, { path : 'NotificationStatus' , operator : 'EQ' , value1 : 'DRAFT' } ], sorter: { path: 'UpdatedAt', descending: true } }"
							noDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingThreshold="20" growingScrollToLoad="false"
							updateFinished=".onUpdateFinished">
							<headerToolbar>
								<OverflowToolbar>
									<ToolbarSpacer/>
									<!-- <Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView">
										<layoutData>
											<OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/>
										</layoutData>
									</Button> -->
									<Button text="{i18n>btnAdd}" type="Emphasized" icon="sap-icon://add" press="onAdd">
										<layoutData>
											<OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/>
										</layoutData>
									</Button>
								</OverflowToolbar>
							</headerToolbar>
							<columns>
								<Column width="15%">
									<Text text="{i18n>colSubject}"/>
								</Column>
								<Column width="50%">
									<Text text="{i18n>colBody}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colNotificationType}"/>
								</Column>
								<Column width="19%">
									<Text text="{i18n>colScheduledDtTm}"/>
								</Column>
								<Column width="15%">
									<Text text="{i18n>colCreatorName}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colAction}"/>
								</Column>
							</columns>
							<items>
								<ColumnListItem type="Navigation" press="onListItemPress">
									<cells>
										<Text text="{Subject}"/>
										<Text text="{Body}"/>
										<Text text="{NotificationType}"/>
										<!-- <Text text="{NotificationStatus}"/> -->
										<VBox>
											<Text text="{parts: [ {path: 'ScheduledDate'}, {path: 'ScheduledTime'} ], formatter : '.formatter.formatDate' }"
												visible="{= !!${ScheduledDate}}"/>
											<Text text="{path: 'UpdatedAt', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { pattern: 'dd/MM/yyyy, hh:mm a' } }"
												visible="{= !${ScheduledDate}}"/>
										</VBox>
										<Text text="{= ${CreatorName}=== null ? 'SYSTEM' : ${CreatorName} }"/>
                                        <HBox>
                                            <Button icon="sap-icon://edit" press="onEdit" type="Transparent" tooltip="Edit"/>
                                            <!-- <Button icon="sap-icon://display" press="onView" type="Transparent" tooltip="Display"/> -->
                                            <Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="Delete"/>
                                        </HBox>
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</IconTabFilter>
					<IconTabFilter text="{worklistView>/scheduled}">
						<Table id="table1" width="auto"
							items="{ path: '/NotificationSet', parameters : { expand : 'Group, Receivers, Redirection' }, filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false }, { path : 'IsSystemGenerated' , operator : 'EQ' , value1 : false }, { path : 'NotificationStatus' , operator : 'EQ' , value1 : 'SCHEDULED' } ], sorter: { path: 'UpdatedAt', descending: true } }"
							noDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingThreshold="20" growingScrollToLoad="false"
							updateFinished=".onUpdateFinished1">
							<headerToolbar>
								<OverflowToolbar>
									<ToolbarSpacer/>
									<!-- <Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView">
										<layoutData>
											<OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/>
										</layoutData>
									</Button> -->
									<Button text="{i18n>btnAdd}" type="Emphasized" icon="sap-icon://add" press="onAdd">
										<layoutData>
											<OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/>
										</layoutData>
									</Button>
								</OverflowToolbar>
							</headerToolbar>
							<columns>
								<Column width="15%">
									<Text text="{i18n>colSubject}"/>
								</Column>
								<Column width="50%">
									<Text text="{i18n>colBody}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colNotificationType}"/>
								</Column>
								<Column width="19%">
									<Text text="{i18n>colScheduledDtTm}"/>
								</Column>
								<Column width="15%">
									<Text text="{i18n>colCreatorName}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colAction}"/>
								</Column>
							</columns>
							<items>
								<ColumnListItem type="Navigation" press="onListItemPress">
									<cells>
										<Text text="{Subject}"/>
										<Text text="{Body}"/>
										<Text text="{NotificationType}"/>
										<VBox>
											<Text text="{parts: [ {path: 'ScheduledDate'}, {path: 'ScheduledTime'} ], formatter : '.formatter.formatDate' }"
												visible="{= !!${ScheduledDate}}"/>
											<Text text="{path: 'UpdatedAt', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { pattern: 'dd/MM/yyyy, hh:mm a' } }"
												visible="{= !${ScheduledDate}}"/>
										</VBox>
										<Text text="{= ${CreatorName}=== null ? 'SYSTEM' : ${CreatorName} }"/>
                                        <HBox>
                                            <Button icon="sap-icon://edit" press="onEdit" type="Transparent"/>
                                            <!-- <Button icon="sap-icon://display" press="onView" type="Transparent" tooltip="View notification"/> -->
                                            <Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="remove"/>
                                        </HBox>
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</IconTabFilter>
					<IconTabFilter text="{worklistView>/triggered}">
						<Table id="table2" width="auto"
							items="{ path: '/NotificationSet', parameters : { expand : 'Group, Receivers, Redirection' }, filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false }, { path : 'IsSystemGenerated' , operator : 'EQ' , value1 : false }, { path : 'NotificationStatus' , operator : 'EQ' , value1 : 'TRIGGERED' } ], sorter: { path: 'UpdatedAt', descending: true } }"
							noDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingThreshold="20" growingScrollToLoad="false"
							updateFinished=".onUpdateFinished2">
							<headerToolbar>
								<OverflowToolbar>
									<ToolbarSpacer/>
									<!-- <Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView">
										<layoutData>
											<OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/>
										</layoutData>
									</Button> -->
									<Button text="{i18n>btnAdd}" type="Emphasized" icon="sap-icon://add" press="onAdd">
										<layoutData>
											<OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/>
										</layoutData>
									</Button>
								</OverflowToolbar>
							</headerToolbar>
							<columns>
								<Column width="20%">
									<Text text="{i18n>colSubject}"/>
								</Column>
								<Column width="50%">
									<Text text="{i18n>colBody}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colNotificationType}"/>
								</Column>
								<Column width="18%">
									<Text text="{i18n>colScheduledDtTm}"/>
								</Column>
								<Column width="15%">
									<Text text="{i18n>colCreatorName}"/>
								</Column>
								<!-- <Column width="7%">
									<Text text="{i18n>colAction}"/>
								</Column> -->
							</columns>
							<items>
								<ColumnListItem type="Navigation" press="onListItemPress">
									<cells>
										<Text text="{Subject}"/>
										<Text text="{Body}"/>
										<Text text="{NotificationType}"/>
										<VBox>
											<Text text="{parts: [ {path: 'ScheduledDate'}, {path: 'ScheduledTime'} ], formatter : '.formatter.formatDate' }"
												visible="{= !!${ScheduledDate}}"/>
											<Text text="{path: 'UpdatedAt', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { pattern: 'dd/MM/yyyy, hh:mm a' } }"
												visible="{= !${ScheduledDate}}"/>
										</VBox>
										<Text text="{= ${CreatorName}=== null ? 'SYSTEM' : ${CreatorName} }"/>
										<!-- <Button icon="sap-icon://display" press="onView" type="Transparent" tooltip="View notification"/> -->
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</IconTabFilter>
				</items>
			</IconTabBar>
		</f:content>
	</f:DynamicPage>
</mvc:View>