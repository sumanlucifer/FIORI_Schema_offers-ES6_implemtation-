<core:FragmentDefinition xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:u="sap.ui.unified"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core">
    <l:VerticalLayout>
        <MessageStrip visible="{= !${oModelControl>/OfferType/AdditionalReward} }" class="sapUiSmallMarginBottom" text="{i18n>Meesage1}" showIcon="true"/>
        <f:Form editable="true">
            <f:layout>
                <f:ResponsiveGridLayout labelSpanXL="12" labelSpanL="12" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="3" columnsL="3" columnsM="3" singleContainerFullSize="false" />
            </f:layout>
            <f:formContainers>

                <f:FormContainer visible="{oModelControl>/OfferType/AdditionalReward}" title="{i18n>formBonusReward}">
                    <f:formElements>
                        <f:FormElement label="{i18n>Description}">
                            <f:fields>
                                <TextArea required="true" placeholder="{i18n>placeHolder3}" height="80Px" maxLength="500" value="{path : 'oModelView>/BonusDescription', type : 'sap.ui.model.type.String', constraints : {minLength :1 , maxLength :500, search :'^[a-zA-Z0-9]{1}[wW]*' } }"/>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>formBonusRewardRatio}" visible="{= ${oModelView>/OfferTypeId}=== 4}">
                            <f:fields>
                                <RadioButtonGroup select="onBRRbChange" columns="2" selectedIndex="{oModelControl>/Rbtn/BRewards}">
                                    <buttons>
                                        <RadioButton text="{i18n>All}"/>
                                        <RadioButton text="{i18n>Specific}"/>
                                    </buttons>
                                </RadioButtonGroup>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>formApplicableLbl7}">
                            <f:fields>
                                <RadioButtonGroup columns="2" select="onRbChnageMain" selectedIndex="{oModelControl>/Rbtn/PCat4}">
                                    <buttons>
                                        <RadioButton text="{i18n>All}"/>
                                        <RadioButton text="{i18n>Specific}"/>
                                    </buttons>
                                </RadioButtonGroup>
                            </f:fields>
                        </f:FormElement>

                        <f:FormElement label="">
                            <f:fields>
                                <MultiComboBox selectionFinish="onPAppDropChange" required="false" id="PCat4" visible="{oModelControl>/MultiEnabled/PCat4}" selectedKeys="{path:'oModelControl>/MultiCombo/PCat4' }" placeholder="{i18n>placeHolder1}" items="{path:'/MasterProductCategorySet',sorter:{path:'Category'} }">
                                    <core:Item text="{Category}" key="{Id}"/>
                                </MultiComboBox>

                            </f:fields>
                        </f:FormElement>

                    </f:formElements>
                </f:FormContainer>
                <f:FormContainer visible="{oModelControl>/OfferType/AdditionalReward}" title="   ">
                    <f:formElements>
                        <f:FormElement label="{i18n>formApplicableLbl8}">
                            <f:fields>
                                <RadioButtonGroup columns="2" select="onRbChnageMain" selectedIndex="{oModelControl>/Rbtn/PClass4}">
                                    <buttons>
                                        <RadioButton text="{i18n>All}"/>
                                        <RadioButton text="{i18n>Specific}"/>
                                    </buttons>
                                </RadioButtonGroup>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement >
                            <f:fields>
                                <MultiComboBox selectionFinish="onPAppDropChange" visible="{oModelControl>/MultiEnabled/PClass4}" id="PClass4" selectedKeys="{oModelControl>/MultiCombo/PClass4}" placeholder="{i18n>placeHolder1}" items="{path:'/MasterProductClassificationSet',sorter:{path:'Classification'} }">
                                    <core:Item text="{Classification}" key="{Id}"/>
                                </MultiComboBox>
                            </f:fields>
                        </f:FormElement>

                        <f:FormElement label="{i18n>Products}">
                            <f:fields>
                                <RadioButtonGroup columns="2" select="onRbChnageMain" selectedIndex="{oModelControl>/Rbtn/AppProd4}">
                                    <buttons>
                                        <RadioButton text="{i18n>All}"/>
                                        <RadioButton text="{i18n>Specific}"/>
                                    </buttons>
                                </RadioButtonGroup>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="">
                            <f:fields>
                                <MultiInput placeholder="{i18n>placeHolder1}" tokenUpdate="onProdTokenUpdate" visible="{= ${oModelControl>/Rbtn/AppProd4}===1}" valueHelpOnly="true" id="AppProd4" valueHelpRequest="handleProdValueHelp" tokens="{oModelControl>/MultiCombo/AppProd4}">
                                    <tokens>
                                        <Token text="{oModelControl>Name}" key="{oModelControl>Id}"/>
                                    </tokens>
                                </MultiInput>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>formApplicableLbl9}">
                            <f:fields>
                                <RadioButtonGroup columns="2" select="onRbChnageMain" selectedIndex="{oModelControl>/Rbtn/AppPacks4}">
                                    <buttons>
                                        <RadioButton text="{i18n>All}"/>
                                        <RadioButton text="{i18n>Specific}"/>
                                    </buttons>
                                </RadioButtonGroup>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="">
                            <f:fields>
                                <MultiInput placeholder="{i18n>placeHolder1}" tokenUpdate="onPackTokenUpdate" visible="{= ${oModelControl>/Rbtn/AppPacks4}===1}" valueHelpOnly="true" id="AppPacks4" valueHelpRequest="handlePackValueHelp" tokens="{oModelControl>/MultiCombo/AppPacks4}">
                                    <tokens>
                                        <Token text="{oModelControl>Name}" key="{oModelControl>Id}"/>
                                    </tokens>
                                </MultiInput>
                            </f:fields>
                        </f:FormElement>


                    </f:formElements>
                </f:FormContainer>
                <!-- <f:FormContainer visible="{oModelControl>/OfferType/AdditionalReward}" title="{i18n>BonusAppPainter}">
                    <f:formElements>
                        <f:FormElement label="{i18n>TopAll50}">
                            <f:fields>
                                <RadioButtonGroup select="onRbTopApp" selectedIndex="{oModelControl>/Rbtn/TopAll}" columns="2">
                                    <buttons>
                                        <RadioButton text="{i18n>All}"/>
                                        <RadioButton text="{i18n>Specific}"/>
                                    </buttons>

                                </RadioButtonGroup>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement>
                            <f:fields>
                                <Input valueStateText="Kindly valid digits. Max 4" enabled="{= ${oModelControl>/Rbtn/TopAll}===1 }" required="true" type="Number" placeholder="{i18n>placeHolder3}" value="{path:'oModelView>/BonusApplicableTopPainter',type:'sap.ui.model.type.String',constraints:{ search :'^[0-9]+$',minLength:1,maxLength:6}}"/>
                            </f:fields>
                        </f:FormElement>
                    </f:formElements>
                </f:FormContainer> -->
                <!-- <f:FormContainer visible="{oModelControl>/OfferType/AdditionalReward}" title="{i18n>BonusValidity}">
                    <f:formElements>
                        <f:FormElement label="{i18n>PainterGrowth}">
                            <f:fields>
                                <Input placeholder="{i18n>placeHolder3}" valueStateText="Kindly valid digits. Max 5" type="Number" value="{path:'oModelView>/PainterGrowth',type : 'sap.ui.model.type.String', constraints:{search :'^[0-9]', minLength:1,maxLength:6} }" />
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>formDateRangeFrom}">
                            <f:fields>
                                <DatePicker change=".onBonusVaidityTo" displayFormat="dd/MM/yyyy" dateValue="{oModelView>/PerformanceStartDate}" placeholder="DD/MM/yyyy"></DatePicker>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>formDateRangeTo}">
                            <f:fields>
                                <DatePicker change=".onBonusVaidityFrom" displayFormat="dd/MM/yyyy" dateValue="{oModelView>/PerformanceEndDate}" placeholder="DD/MM/yyyy"></DatePicker>
                            </f:fields>
                        </f:FormElement>

                    </f:formElements>
                </f:FormContainer> -->


            </f:formContainers>
        </f:Form>
        <Table id="Table3" visible="{= ${oModelControl>/Rbtn/BRewards}===0 &amp;&amp; ${oModelControl>/OfferType/AdditionalReward}===true }" width="auto" items="{path: 'oModelControl>/Table/Table3',  templateShareable:false}" noDataText="{i18n>tableNoDataText}" growingScrollToLoad="false" busyIndicatorDelay="{oModelView>/tableBusyDelay}">
            <headerToolbar>
                <Toolbar>
                    <Title text="{i18n>formBonusRewardRatio}" />
                    <RadioButtonGroup columns="2" select=".onRbRRDialogVolume2" selectedIndex="{oModelView>/BonusInputType}">
                        <buttons>
                            <RadioButton text="{i18n>Table3Label1}"/>
                            <RadioButton text="{i18n>BonusPercentage}"/>
                        </buttons>
                    </RadioButtonGroup>
                    <ToolbarSpacer ></ToolbarSpacer>
                    <Button enabled="{= ${oModelControl>/Table/Table3}.length===0 }" icon="sap-icon://add" text="{i18n>Add}" tooltip="{i18n>Add}" type="Emphasized" press="onPressAddGenericReward2V2('add')"/>
                </Toolbar>
            </headerToolbar>

            <columns>
                <Column>
                    <Label required="true" text="{i18n>formBonusValidaityFrom}" />
                </Column>
                <Column>
                    <Label required="true" text="{i18n>formBonusValidaityTo}" />
                </Column>

                <Column visible="{= ${oModelView>/BonusInputType}===0 }">
                    <Label required="true" text="{i18n>Table3Label1}" />
                </Column>
                <Column visible="{= ${oModelView>/BonusInputType}===1 }">
                    <Label required="true" text="{i18n>BonusPercentage}" />
                </Column>
                <Column>
                    <Text text="{i18n>tblColAction}"/>
                </Column>
            </columns>
            <items>
                <ColumnListItem press="onListItemPress">
                    <cells>
                        <VBox >
                            <Label visible="{= ${oModelControl>editable} !== true }" text="{path:'oModelControl>StartDate',type:'sap.ui.model.type.Date', formatOptions: { pattern: 'dd/MM/yyyy', strictParsing: true} }"/>
                            <DatePicker visible="{= ${oModelControl>editable} === true }" change=".onStartDateBRRChange" displayFormat="dd/MM/yyyy" placeholder="DD/MM/yyyy" width="100%" dateValue="{oModelControl>StartDate}" />
                        </VBox>
                        <VBox >
                            <Label visible="{= ${oModelControl>editable} !== true  }" text="{path:'oModelControl>EndDate',type:'sap.ui.model.type.Date', formatOptions: { pattern: 'dd/MM/yyyy', strictParsing: true}}"/>
                            <DatePicker visible="{= ${oModelControl>editable} === true }" change=".onEndDateBRRChange" displayFormat="dd/MM/yyyy" placeholder="DD/MM/yyyy" width="100%" dateValue="{oModelControl>EndDate}" />
                        </VBox>
                        <VBox visible="{= ${oModelView>/BonusInputType}===0 }">
                            <Label width="60%" text="{path:'oModelControl>BonusPoints'}" visible="{= ${oModelControl>editable} !== true  }" />
                            <Input required="true" visible="{= ${oModelControl>editable} === true }" type="Number" placeholder="{i18n>placeHolder3}" width="100%" value="{path:'oModelControl>BonusPoints',type:'sap.ui.model.type.String',constraints:{search:'^[1-9][0-9]*$',minLength:1,maxLength:6} }" valueStateText="Kindly Enter a Valid Number not starting with 0" />
                        </VBox>
                        <VBox visible="{= ${oModelView>/BonusInputType}===1 }">
                            <Label width="60%" text="{path:'oModelControl>BonusPercentage'}" visible="{= ${oModelControl>editable} !== true  }" />
                            <Input required="true" visible="{= ${oModelControl>editable} === true }" type="Number" placeholder="{i18n>placeHolder3}" width="100%" value="{path:'oModelControl>BonusPercentage',type:'sap.ui.model.type.String',constraints:{search:'^[1-9][0-9]*$',minLength:1,maxLength:6} }" valueStateText="Kindly Enter a Valid Number not starting with 0" />
                        </VBox>
                        <HBox>
                            <Button visible="{= ${oModelControl>editable} !== true }" icon="sap-icon://edit" tooltip="{i18n>Edit}" type="Transparent" press="onPressAddGenericReward2V2"></Button>
                            <Button visible="{= ${oModelControl>editable} === true }" text="{i18n>Save}" tooltip="{i18n>Save}" type="Transparent" press="onSaveGenericBonusReward"></Button>
                            <Button icon="sap-icon://delete" type="Transparent" tooltip="{i18n>Delete}" press="onRemovedGenericReward2"></Button>
                        </HBox>
                        <!-- <Text text="{path:'oModelControl>StartDate',type:'sap.ui.model.type.Date', formatOptions: { pattern: 'dd/MM/yyyy', strictParsing: true} }"/>
                        <Text text="{path:'oModelControl>EndDate',type:'sap.ui.model.type.Date', formatOptions: { pattern: 'dd/MM/yyyy', strictParsing: true}}"/>
                        <Text width="60%" text="{path:'oModelControl>BonusPoints'}" />
                        <HBox>
                            <Button icon="sap-icon://edit" tooltip="{i18n>Edit}" type="Transparent" press="onPressAddGenericReward2"></Button>
                            <Button icon="sap-icon://delete" type="Transparent" tooltip="{i18n>Delete}" press="onRemovedGenericReward2"></Button>
                        </HBox> -->
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
        <MessageStrip visible="{= ${oModelControl>/Rbtn/BRewards}=== 1 &amp;&amp; ${oModelControl>/OfferType/AdditionalReward}===true }" showIcon="true" text="{i18n>Message1}"></MessageStrip>
        <Table id="Table4" visible="{= ${oModelControl>/Rbtn/BRewards}=== 1 &amp;&amp; ${oModelControl>/OfferType/AdditionalReward}===true }" width="auto" items="{path: 'oModelControl>/Table/Table4',  templateShareable: false}" noDataText="{i18n>tableNoDataText}" growingScrollToLoad="false" busyIndicatorDelay="{oModelView>/tableBusyDelay}">
            <headerToolbar>
                <Toolbar>
                    <Title text="{i18n>formBonusRewardRatio}" />
                    <RadioButtonGroup columns="2" select=".onRbRRDialogVolume2" selectedIndex="{oModelView>/BonusInputType}">
                        <buttons>
                            <RadioButton text="{i18n>Table3Label1}"/>
                            <RadioButton text="{i18n>BonusPercentage}"/>
                        </buttons>
                    </RadioButtonGroup>
                    <ToolbarSpacer ></ToolbarSpacer>
                    <!-- <Button icon="sap-icon://add" text="{i18n>Add}" tooltip="{i18n>Add}" type="Emphasized" press="onPressAddRewards2('add')"/> -->
                    <Button icon="sap-icon://add" text="{i18n>Add}" tooltip="{i18n>Add}" type="Emphasized" press="onPressAddRewards2V2('add')"/>
                </Toolbar>
            </headerToolbar>

            <columns>
                <Column>
                    <Label required="true" text="{i18n>ProductsPacks}" />
                </Column>
                <Column>
                    <Label required="true" text="{i18n>formBonusValidaityFrom}" />
                </Column>
                <Column>
                    <Label required="true" text="{i18n>formBonusValidaityTo}" />
                </Column>

                <Column visible="{= ${oModelView>/BonusInputType}===0 }">
                    <Label required="true" text="{i18n>Table3Label1}" />
                </Column>
                <Column visible="{= ${oModelView>/BonusInputType}===1 }">
                    <Label required="true" text="{i18n>BonusPercentage}" />
                </Column>
                <Column>
                    <Text text="{i18n>tblColAction}"/>
                </Column>
            </columns>

            <items>
                <ColumnListItem press="onListItemPress">
                    <cells>
                        <VBox>
                            <ComboBox editable="{= ${oModelControl>editable} === true}" change="onBRRProductChange" placeholder="Products" selectedKey="{oModelControl>ProductCode}" visible="{= ${oModelControl>/Rbtn/AppPacks4} === 0 }" items="{path:'oModelControl>/MultiCombo/Reward2',templateShareable: false}">
                                <core:Item text="{oModelControl>Name}" key="{oModelControl>Id}"/>
                            </ComboBox>
                            <!-- <Label visible="{= ${oModelControl>/Rbtn/AppPacks4}=== 0 &amp;&amp;  ${oModelControl>editable} !== true }" text="{path:'oModelControl>ProductCode',formatter:'.GetProdName'}" /> -->
                            <ComboBox editable="{= ${oModelControl>editable} === true}" change="onBRRPackChange" placeholder="Packs" selectedKey="{oModelControl>SkuCode}" visible="{= ${oModelControl>/Rbtn/AppPacks4} === 1 }" items="{path:'oModelControl>/MultiCombo/Reward2',templateShareable: false}">
                                <core:Item text="{oModelControl>Name}" key="{oModelControl>Id}"/>
                            </ComboBox>
                            <!-- <Label visible="{= ${oModelControl>/Rbtn/AppPacks4}=== 1 &amp;&amp;  ${oModelControl>editable} !== true}" text="{path:'oModelControl>SkuCode',formatter:'.GetPackName'}" /> -->

                        </VBox>
                        <VBox >
                            <Label visible="{= ${oModelControl>editable} !== true }" text="{path:'oModelControl>StartDate',type:'sap.ui.model.type.Date', formatOptions: { pattern: 'dd/MM/yyyy', strictParsing: true} }"/>
                            <DatePicker visible="{= ${oModelControl>editable} === true }" change=".onStartDateBRRChange" displayFormat="dd/MM/yyyy" placeholder="DD/MM/yyyy" width="100%" dateValue="{oModelControl>StartDate}" />
                        </VBox>
                        <VBox >
                            <Label visible="{= ${oModelControl>editable} !== true  }" text="{path:'oModelControl>EndDate',type:'sap.ui.model.type.Date', formatOptions: { pattern: 'dd/MM/yyyy', strictParsing: true}}"/>
                            <DatePicker visible="{= ${oModelControl>editable} === true }" change=".onEndDateBRRChange" displayFormat="dd/MM/yyyy" placeholder="DD/MM/yyyy" width="100%" dateValue="{oModelControl>EndDate}" />
                        </VBox>
                        <VBox visible="{= ${oModelView>/BonusInputType}===0 }">
                            <Label width="60%" text="{path:'oModelControl>BonusPoints'}" visible="{= ${oModelControl>editable} !== true  }" />
                            <Input required="true" visible="{= ${oModelControl>editable} === true }" type="Number" placeholder="{i18n>placeHolder3}" width="100%" value="{path:'oModelControl>BonusPoints',type:'sap.ui.model.type.String',constraints:{search:'^[0-9]+$',minLength:1,maxLength:6} }" />
                        </VBox>
                        <VBox visible="{= ${oModelView>/BonusInputType}===1 }">
                            <Label width="60%" text="{path:'oModelControl>BonusPercentage'}" visible="{= ${oModelControl>editable} !== true  }" />
                            <Input required="true" visible="{= ${oModelControl>editable} === true }" type="Number" placeholder="{i18n>placeHolder3}" width="100%" value="{path:'oModelControl>BonusPercentage',type:'sap.ui.model.type.String',constraints:{search:'^[0-9]+$',minLength:1,maxLength:6} }" />
                        </VBox>
                        <HBox>
                            <Button visible="{= ${oModelControl>editable} !== true }" icon="sap-icon://edit" tooltip="{i18n>Edit}" type="Transparent" press="onPressAddRewards2V2"></Button>
                            <Button visible="{= ${oModelControl>editable} === true }" text="{i18n>Save}" tooltip="{i18n>Save}" type="Transparent" press="onSaveBonusRewardV2"></Button>
                            <Button icon="sap-icon://delete" type="Transparent" tooltip="{i18n>Delete}" press="onRemovedReward2"></Button>
                        </HBox>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </l:VerticalLayout>
</core:FragmentDefinition>