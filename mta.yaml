_schema-version: "3.2"
ID: knpl-influencer-web
version: 1.0.0
modules:
- name: knpl-influencer-web-approuter-uat
  type: approuter.nodejs
  path: knpl-influencer-web-approuter
  properties:
    TENANT_HOST_PATTERN: ^(.*)-knpl-influencer-web-approuter-uat.${default-domain}
  requires:
  - name: uaa_knpl-influencer-web-uat
  - name: knpl-influencer-web_html_repo_runtime-uat
  - name: destination-knpl-pragati-uat
  - name: wm_workflow
  - name: portal_resources_knpl-influencer-web-uat
    group: destinations
    properties:
      forwardAuthToken: true
      timeout: 180000
      name: KNPL_PAINTER_API
      url: https://uat-knpl-pragati-api.cfapps.ap10.hana.ondemand.com/
  parameters:
    disk-quota: 256M
    memory: 256M
    routes:
    - route: knpl-painter-dev-knpl-influencer-web-approuter-uat.${default-domain}
- name: knpl-influencer-web_ui_deployer-uat
  type: com.sap.application.content
  path: .
  requires:
  - name: knpl-influencer-web_html_repo_host-uat
    parameters:
      content-target: true
  build-parameters:
    build-result: resources
    requires:
    - artifacts:
      - MDM-content.zip
      name: MDM
      target-path: resources/
    - artifacts:
      - ContactPainter-content.zip
      name: ContactPainter
      target-path: resources/
    - artifacts:
      - Manage_FAQ-content.zip
      name: Manage_FAQ
      target-path: resources/
    - artifacts:
      - DealerManagement-content.zip
      name: DealerManagement
      target-path: resources/
    - artifacts:
      - OrganizationSetup-content.zip
      name: OrganizationSetup
      target-path: resources/
    - artifacts:
      - Manage_Notifications-content.zip
      name: Manage_Notifications
      target-path: resources/
    - artifacts:
      - Catelogue-content.zip
      name: Catelogue
      target-path: resources/
    - artifacts:
      - CompanySettings-content.zip
      name: CompanySettings
      target-path: resources/
    - artifacts:
      - Training_Learning-content.zip
      name: Training_Learning
      target-path: resources/
    - artifacts:
      - Tools-content.zip
      name: Tools
      target-path: resources/
    - artifacts:
      - Complaints-content.zip
      name: Complaints
      target-path: resources/
    - artifacts:
      - CallbackRequests-content.zip
      name: CallbackRequests
      target-path: resources/
    - artifacts:
      - LoyaltyManagement-content.zip
      name: LoyaltyManagement
      target-path: resources/
    - artifacts:
      - Scheme-offers-content.zip
      name: SchemeOffers
      target-path: resources/
    - artifacts:
      - groupnotifications-content.zip
      name: groupnotifications
      target-path: resources/
    - artifacts:
      - condonation-content.zip
      name: condonation
      target-path: resources/
    - artifacts:
      - redeempoints-content.zip
      name: redeempoints
      target-path: resources/
    - artifacts:
      - reports-content.zip
      name: reports
      target-path: resources/
    - artifacts:
      - painterportfolio-content.zip
      name: painterportfolio
      target-path: resources/
- name: MDM
  type: html5
  path: MDM
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: ContactPainter
  type: html5
  path: ContactPainter
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: launchpad
  type: com.sap.application.content
  path: launchpad
  requires:
  - name: portal_resources_knpl-influencer-web-uat
    parameters:
      content-target: true
      service-key:
        config:
          content-endpoint: developer
        name: content-deploy-key
  - name: knpl-influencer-web_html_repo_host-uat
  - name: uaa_knpl-influencer-web-uat
  parameters:
    config:
      TENANT_HOST_PATTERN: ^(.*)-knpl-influencer-web-approuter-uat.${default-domain}
  deployed-after:
  - knpl-influencer-web_ui_deployer-uat
- name: Manage_FAQ
  type: html5
  path: Manage_FAQ
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: DealerManagement
  type: html5
  path: DealerManagement
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: OrganizationSetup
  type: html5
  path: OrganizationSetup
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: Manage_Notifications
  type: html5
  path: Manage_Notifications
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: Catelogue
  type: html5
  path: Catelogue
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: CompanySettings
  type: html5
  path: CompanySettings
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: Training_Learning
  type: html5
  path: Training_Learning
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: Tools
  type: html5
  path: Tools
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: Complaints
  type: html5
  path: Complaints
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: CallbackRequests
  type: html5
  path: CallbackRequests
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: LoyaltyManagement
  type: html5
  path: LoyaltyManagement
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: SchemeOffers
  type: html5
  path: SchemeOffers
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: groupnotifications
  type: html5
  path: groupnotifications
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: condonation
  type: html5
  path: condonation
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: redeempoints
  type: html5
  path: redeempoints
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: reports
  type: html5
  path: reports
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
- name: painterportfolio
  type: html5
  path: painterportfolio
  build-parameters:
    builder: custom
    commands:
    - npm run build
    supported-platforms: []
resources:
- name: uaa_knpl-influencer-web-uat
  type: org.cloudfoundry.existing-service
  parameters:
    path: ./xs-security.json
    service: xsuaa
    service-name: uat-knpl-pragati-uaa
    service-plan: application
- name: knpl-influencer-web_html_repo_runtime-uat
  type: org.cloudfoundry.managed-service
  parameters:
    service: html5-apps-repo
    service-plan: app-runtime
- name: destination-knpl-pragati-uat
  type: org.cloudfoundry.existing-service
  parameters:
    config:
      HTML5Runtime_enabled: true
      init_data:
        instance:
          destinations:
          - Authentication: NoAuthentication
            Name: ui5
            ProxyType: Internet
            Type: HTTP
            URL: https://ui5.sap.com
          existing_destinations_policy: update
      version: 1.0.0
    service: destination
    service-plan: lite
    service-name: uat-destination-knpl-pragati
- name: knpl-influencer-web_html_repo_host-uat
  type: org.cloudfoundry.managed-service
  parameters:
    config:
      sizeLimit: 10
    service: html5-apps-repo
    service-plan: app-host
- name: portal_resources_knpl-influencer-web-uat
  type: org.cloudfoundry.managed-service
  parameters:
    service: portal
    service-plan: standard
- name: wm_workflow
  type: org.cloudfoundry.existing-service
  parameters:
    service: workflow
    service-plan: standard
    service-name: wm_workflow
parameters:
  enable-parallel-deployments: true
build-parameters:
  before-all:
  - builder: custom
    commands:
    - npm install
