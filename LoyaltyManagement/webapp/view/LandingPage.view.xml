<mvc:View controllerName="com.knpl.pragati.LoyaltyManagement.controller.LandingPage" height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.ui.layout"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:data="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
    xmlns:vm="sap.ui.comp.variants"
    xmlns:smartTable="sap.ui.comp.smarttable">
    <f:DynamicPage headerExpanded="true" stickySubheaderProvider="idIconTabBar" class="sapUiNoContentPadding">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="{i18n>landingPageViewTitle}"/>
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <f:content>
                    <fb:FilterBar id="filterbar" reset="_ResetFilterBar" search="onFilter" useToolbar="false" showGoOnFB="true" showRestoreOnFB="true"> 
                        
                        <fb:filterGroupItems>
                         <fb:FilterGroupItem groupName="__$INTERNAL$" name="Search" label="{i18n>searchFilterLabel}" visibleInFilterBar="true">
                                <fb:control>
                                    <SearchField id="idSearchInput"  value="{oModelControl>/filterBar/Name}" showSearchButton="false" placeholder="{i18n>searchFilterPlaceholder}" />
                                </fb:control>
                            </fb:FilterGroupItem>
                         <fb:FilterGroupItem groupName="__$INTERNAL$" name="Zone" label="{i18n>Zone}" visibleInFilterBar="true" class="searchFieldLabelHidden">
                                <fb:control>
                                     <ComboBox id="idZone" placeholder="{i18n>Enter} {i18n>Zone}" selectionChange="onZoneChange"  items="{/MasterZoneSet}" selectedKey="{path:'oModelControl>/filterBar/ZoneId' }">
                                        <core:Item text="{Id} " key="{Id}" />
                                    </ComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                             <fb:FilterGroupItem groupName="__$INTERNAL$" name="Division" label="{i18n>Division}" visibleInFilterBar="true" class="searchFieldLabelHidden">
                                <fb:control>
                                        <ComboBox  enabled="{= ${oModelControl>/filterBar/ZoneId}.length>1}" placeholder="{i18n>Enter} {i18n>Division}" id="idDivision" selectionChange="onDivisionChange" items="{/MasterDivisionSet}" selectedKey="{path:'oModelControl>/filterBar/DivisionId'}">
                                         <core:Item text="{Id}" key="{Id}" />
                                        </ComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                             <fb:FilterGroupItem groupName="__$INTERNAL$" name="Depot" label="{i18n>Depot}" visibleInFilterBar="true" class="searchFieldLabelHidden">
                                <fb:control>
                                     <ComboBox enabled="{= ${oModelControl>/filterBar/DivisionId}.length>1}" id="idDepot" placeholder="{i18n>Enter} {i18n>Depot}" selectionChange="onDepotChange"  items="{/MasterDepotSet}" selectedKey="{path:'oModelControl>/filterBar/DepotId' }">
                                        <core:Item text="{Depot} ( {Id} )" key="{Id}" />
                                    </ComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="Type" label="{i18n>tblColTypeOfAccrualRedemption}" visibleInFilterBar="true" class="searchFieldLabelHidden">
                                <fb:control>
                                 <ComboBox id="idType" placeholder="{i18n>Enter} {i18n>tblColTypeOfAccrualRedemption}" selectionChange=""  items="{/MasterPointTypeSet}" selectedKey="{path:'oModelControl>/filterBar/Type' }">
                                        <core:Item text="{path:'Id',formatter:'.formatter.accuralType'} " key="{Id}" />
                                </ComboBox>
                                     <!-- <Input  id="idType" name="Type" placeholder="{i18n>Enter} {i18n>tblColTypeOfAccrualRedemption}" value="{oModelControl>/filterBar/Type}"></Input> -->
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="Points" label="{i18n>Point}" visibleInFilterBar="true" class="searchFieldLabelHidden">
                                <fb:control>
                               <Input  id="idPoint" name="Point" placeholder="{i18n>Enter} {i18n>Point}" value="{oModelControl>/filterBar/Point}"></Input>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="StartDate" label="{i18n>StartDate}" visibleInFilterBar="true" class="searchFieldLabelHidden">
                                <fb:control>
                                    <DatePicker placeholder="DD/MM/YYYY" id="idDpickerFilter" value="{path:'oModelControl>/filterBar/StartDate', type:'sap.ui.model.type.Date', formatOptions: {pattern:'dd/MM/yyyy', UTC:true } }" displayFormat="dd/MM/yyyy"></DatePicker>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="EndDate" label="{i18n>EndDate}" visibleInFilterBar="true" class="searchFieldLabelHidden">
                                <fb:control>
                                    <DatePicker placeholder="DD/MM/YYYY"  value="{path:'oModelControl>/filterBar/EndDate', type:'sap.ui.model.type.Date', formatOptions: {pattern:'dd/MM/yyyy', UTC:true } }" displayFormat="dd/MM/yyyy"></DatePicker>
                                </fb:control>
                            </fb:FilterGroupItem>


                             
                        </fb:filterGroupItems>

                    </fb:FilterBar>
                     
                </f:content>
            </f:DynamicPageHeader>
        </f:header>

        <!-- DynamicPage Content -->
        <f:content>
            <IconTabBar
                id="idIconTabBar"
                headerMode="Inline"
                expanded="{device>/isNoPhone}"
                class="sapUiResponsiveContentPadding">
                <items>

                    <IconTabFilter text="{i18n>allRwds}"
                        key="all">
                    <smartTable:SmartTable
                    id="idAllTable"
                    editable="false"
                    header="{i18n>allRwds}"
                    beforeRebindTable="fnrebindTableAll"                    
                    entitySet="PainterPointsHistorySet"
                    tableType="ResponsiveTable"
                    showRowCount="true"
                    useExportToExcel="true"
                    useVariantManagement="false"
                    useTablePersonalisation="true"
                    ignoredFields="IsArchived,IsSelected,Id"
                    demandPopin="true"
                    requestAtLeastFields="Id,PointType,Painter/Name,PaymentTransaction/TransactionMessage"
                    enableAutoBinding="true"
                    placeToolbarInTable="true" 
                    persistencyKey="PainterListSmartTableKey"
                  >
                  <Table growing="true" growingThreshold="10" growingScrollToLoad="false">
                    
                                <columns>
                                <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey": "PointType","type":"string", "leadingProperty": "PointType", "columnIndex": 7 }'/>
                                        </customData>
                                          <Text text="{i18n>tblColTypeOfAccrualRedemption}"/>
                                    </Column>
                                 <!-- <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey": "RewardPoints","type":"string", "leadingProperty": "RewardPoints", "columnIndex": 8 }'/>
                                        </customData>
                                          <Text text="{i18n>tblColPoints}"/>
                                    </Column>
                                    <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey": "GiftRedemption/RewardGiftName","type":"string", "leadingProperty": "GiftRedemption/RewardGiftName", "columnIndex": 9 }'/>
                                        </customData>
                                          <Text text="{i18n>RewardGift}"/>
                                    </Column> -->
                                    <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey":"Remark","columnIndex": 9 }'/>
                                        </customData>
                                          <Text text="{i18n>Remark}"/>
                                    </Column>
                                    <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey": "CreatedAt","type":"date", "leadingProperty": "CreatedAt", "columnIndex": 10 }'/>
                                        </customData>
                                          <Text text="{i18n>tblColDateTime}"/>
                                    </Column>
                                    </columns>
                                    <items>
                                    <ColumnListItem type="Navigation" press="onListItemPress">
                                        <cells>
                                            <Text text="{path:'PointType',formatter:'.formatter.accuralType'}"/>
                                            <Text text="{= ${PaymentTransaction}=== null ? 'NA' : ${PaymentTransaction/TransactionMessage} }"/>
                                            <Text text="{path:'CreatedAt',formatter:'.formatter.dateFormatter2'}"/>
                        
                                            
                                        </cells>      
                                    </ColumnListItem>
                                </items> 

                        </Table>
                 </smartTable:SmartTable>
                
                    </IconTabFilter>
                   

                    
                    
                    <IconTabFilter text="{i18n>accuralPoints}"
                        key="acc">
                    <smartTable:SmartTable
                    id="idAccTable"
                    editable="false"
                    header="{i18n>accuralPoints}"
                    beforeRebindTable="fnrebindTableAcc"                    
                    entitySet="PainterPointsHistorySet"
                    tableType="ResponsiveTable"
                    showRowCount="true"
                    useExportToExcel="true"
                    useVariantManagement="false"
                    useTablePersonalisation="true"
                    ignoredFields="IsArchived,IsSelected,Id"
                    demandPopin="true"
                    requestAtLeastFields="Id,PointType,Painter/Name"
                    enableAutoBinding="true"
                    placeToolbarInTable="true" 
                    persistencyKey="PainterListSmartTableKey"
                  >
                  <Table growing="true" growingThreshold="10" growingScrollToLoad="false" >
                    
                                <columns>
                                <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey": "PointType","type":"string", "leadingProperty": "PointType", "columnIndex": 7 }'/>
                                        </customData>
                                          <Text text="{i18n>tblColTypeOfAccrual}"/>
                                    </Column>
                                 <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey": "RewardPoints","type":"string", "leadingProperty": "RewardPoints", "columnIndex": 8 }'/>
                                        </customData>
                                          <Text text="{i18n>tblColPoints}"/>
                                    </Column>
                                    
                                    <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey": "CreatedAt","type":"date", "leadingProperty": "CreatedAt", "columnIndex": 9 }'/>
                                        </customData>
                                          <Text text="{i18n>tblColDateTime}"/>
                                    </Column>
                                    </columns>
                                    <items>
                                    <ColumnListItem type="Navigation" press="onListItemPress">
                                        <cells>
                                            <Text text="{path:'PointType',formatter:'.formatter.accuralType'}"/>
                                            <Text text="{path:'RewardPoints'}"/>
                                            <Text text="{path:'CreatedAt',formatter:'.formatter.dateFormatter2'}"/>
                        
                                            
                                        </cells>      
                                    </ColumnListItem>
                                </items> 

                        </Table>
                 </smartTable:SmartTable>
                
                    </IconTabFilter>
                    <IconTabFilter text="{i18n>redemptionRwds}"
                        key="redemption">
                    <smartTable:SmartTable
                    id="idRdmTable"
                    editable="false"
                    header="{i18n>redemptionRwds}"
                    beforeRebindTable="fnrebindTableRdm"                    
                    entitySet="PainterPointsHistorySet"
                    tableType="ResponsiveTable"
                    showRowCount="true"
                    useExportToExcel="true"
                    useVariantManagement="false"
                    useTablePersonalisation="true"
                    ignoredFields="IsArchived,IsSelected,Id"
                    demandPopin="true"
                    requestAtLeastFields="Id,PointType,Painter/Name,RewardPoints,GiftRedemption/RewardGiftName,PaymentTransaction/TransactionAmount,PaymentTransaction/TransactionMessage"
                    enableAutoBinding="true"
                    placeToolbarInTable="true" 
                    persistencyKey="PainterListSmartTableKey"
                  >
                   <Table growing="true" growingThreshold="10" growingScrollToLoad="false">
                    
                                <columns>
                                <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey": "PointType","type":"string", "leadingProperty": "PointType", "columnIndex": 7 }'/>
                                        </customData>
                                          <Text text="{i18n>tblColTypeOfRedemption}"/>
                                    </Column>
                                 <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey":"RewardGiftCash","columnIndex": 8 }'/>
                                        </customData>
                                          <Text text="{i18n>RewardGiftCash}"/>
                                    </Column>
                                    <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey":"Remark","columnIndex": 9 }'/>
                                        </customData>
                                          <Text text="{i18n>Remark}"/>
                                    </Column>
                                    <Column hAlign="Center">
                                        <customData>
                                            <core:CustomData key="p13nData" value='\{"columnKey": "CreatedAt","type":"date", "leadingProperty": "CreatedAt", "columnIndex": 10 }'/>
                                        </customData>
                                          <Text text="{i18n>tblColDateTimeRdm}"/>
                                    </Column>
                                    </columns>
                                    <items>
                                    <ColumnListItem type="Navigation" press="onListItemPress">
                                        <cells>
                                            <Text text="{path:'PointType',formatter:'.formatter.accuralType'}"/>
                                            <Text text="{= ${GiftRedemption}=== null ? ${PaymentTransaction/TransactionAmount} : ${GiftRedemption/RewardGiftName} }"/>
                                            <Text text="{= ${PaymentTransaction}=== null ? 'NA' : ${PaymentTransaction/TransactionMessage} }"/>
                                            <Text text="{path:'CreatedAt',formatter:'.formatter.dateFormatter2'}"/>
                        
                                            
                                        </cells>      
                                    </ColumnListItem>
                                </items> 

                        </Table>
                 </smartTable:SmartTable>
                
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </f:content>
    </f:DynamicPage>
</mvc:View>
