<mvc:View controllerName="com.knpl.pragati.Manage_FAQ.controller.Worklist" xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc"
	xmlns:f="sap.f" xmlns:fb="sap.ui.comp.filterbar">
	<f:DynamicPage id="page">
		<f:title>
			<f:DynamicPageTitle>
				<f:heading>
					<Title text="{i18n>worklistTitle}"/>
				</f:heading>
			</f:DynamicPageTitle>
		</f:title>
		<f:header>
			<f:DynamicPageHeader pinnable="true">
				<f:content>
					<fb:FilterBar showRestoreButton="true" id="filterbar" reset="onReset" search="onSearch" useToolbar="false" showRestoreOnFB="true">
						<fb:filterGroupItems>
							<fb:FilterGroupItem visibleInFilterBar="true" groupName="A" name="FAQCategoryId" groupTitle="Filters" label="{i18n>colFAQCategory}">
								<fb:control>
									<ComboBox placeholder="{i18n>enterFAQCategory}" selectionChange="onFAQCategoryChange" items="{ path: '/MasterFAQCategorySet', filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false } ] }" selectedKey="{worklistView>/filterBar/FAQCategoryId}">
										<core:Item key="{Id}" text="{FAQCategory}"/>
									</ComboBox>
								</fb:control>
							</fb:FilterGroupItem>
                            <fb:FilterGroupItem visibleInFilterBar="true" groupName="A" name="FAQSubcategoryId" groupTitle="Filters" label="{i18n>colFAQSubcategory}">
								<fb:control>
									<ComboBox id="idFAQSubCategory" enabled="{= ${worklistView>/hasFAQSubcategory} === true}" placeholder="{i18n>enterFAQSubcategory}" items="{ path: '/MasterFAQSubcategorySet' }" selectedKey="{worklistView>/filterBar/FAQSubcategoryId}">
										<core:Item key="{Id}" text="{FAQSubcategory}"/>
									</ComboBox>
								</fb:control>
							</fb:FilterGroupItem>
						</fb:filterGroupItems>
					</fb:FilterBar>
				</f:content>
			</f:DynamicPageHeader>
		</f:header>
		<f:content>
			<Table id="table" width="auto"
				items="{ path: '/MasterFAQSet', parameters : { expand : 'FAQCategory,FAQSubcategory' }, filters : { path : 'IsArchived' , operator : 'EQ' , value1 : false }, sorter: { path: 'Id', descending: false } }"
				noDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingThreshold="20" growingScrollToLoad="false"
				updateFinished="onUpdateFinished">
				<headerToolbar>
					<OverflowToolbar>
						<Title id="tableHeader" text="{worklistView>/worklistTableTitle}" level="H3"/>
						<ToolbarSpacer/>
						<Button text="{i18n>btnAdd}" type="Emphasized" icon="sap-icon://add" press="onAdd" visible="{= (${worklistView>/loggedUserRoleId} !== 2) }">
							<layoutData>
								<OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/>
							</layoutData>
						</Button>
					</OverflowToolbar>
				</headerToolbar>
				<columns>
                    <Column width="15%">
						<Text text="{i18n>colFAQCategory}"/>
					</Column>
                    <Column width="15%">
						<Text text="{i18n>colFAQSubcategory}"/>
					</Column>
					<Column width="20%">
						<Text text="{i18n>colQuestion}"/>
					</Column>
					<Column width="40%">
						<Text text="{i18n>colAnswer}"/>
					</Column>
                    <Column width="10%">
						<Text text="{i18n>colAction}"/>
					</Column>
				</columns>
				<items>
					<ColumnListItem>
						<cells>
							<Text text="{FAQCategory/FAQCategory}"/>
                            <Text text="{= ${FAQSubcategoryId} === null ? 'NA' : ${FAQSubcategory/FAQSubcategory} }"/>
							<Text text="{Question}"/>
							<Text text="{Answer}"/>
                            <HBox>
                                <Button icon="sap-icon://edit" press="onEdit" type="Transparent" tooltip="Edit" enabled="{= (${worklistView>/loggedUserRoleId} !== 2) }"/>
                                <Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="Delete" enabled="{= (${worklistView>/loggedUserRoleId} !== 2) }"/>
                            </HBox>
						</cells>
					</ColumnListItem>
				</items>
			</Table>
		</f:content>
	</f:DynamicPage>
</mvc:View>